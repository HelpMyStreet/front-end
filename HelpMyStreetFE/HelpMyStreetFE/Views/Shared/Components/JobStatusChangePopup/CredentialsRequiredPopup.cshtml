@using HelpMyStreet.Utils.Extensions;
@using HelpMyStreetFE.Models.Account.Jobs

@model JobStatusChangePopupViewModel;


<div class="popup__content__header">Start Helping?</div>
<div class="popup__content__text">
    @if (Model.AnnotatedGroupActivityCredentialSets.AnnotatedCredentialSets.Where(s => !s.Any(c => c.UserHasCredential)).Count() == 1)
    {
        <p>There's just one more thing you need to do before you can accept this request.</p>
    }
    else
    {
        <p>There's just a few more things you need to do before you can accept this request. </p>
    }

    <p>To complete a <strong>@Model.ReferringGroup</strong> request for <strong>@Model.JobSummary.SupportActivity.FriendlyNameShort()</strong> you need to:</p>

    <ol>
        @foreach (var set in Model.AnnotatedGroupActivityCredentialSets.AnnotatedCredentialSets)
        {
            if (set.Any(c => c.UserHasCredential))
            {
                <li>
                    <dl>
                        @foreach (var cred in set.Where(c => c.UserHasCredential))
                        {
                            <dt>@cred.GroupCredential.Name</dt>
                            <dd>done</dd>
                        }
                    </dl>
                </li>
            }
            else
            {
                <li>
                    <dl>
                        @foreach (var cred in set)
                        {
                            <dt>@cred.GroupCredential.Name</dt>
                            <dd>@cred.GroupCredential.HowToAchieve</dd>
                        }
                    </dl>
                </li>
            }
        }
    </ol>
</div>
