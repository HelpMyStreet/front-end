@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model HelpMyStreetFE.Models.Account.Jobs.StatusBarViewModel
@{
    var unacceptedJobs = ((double)Model.TotalJobs - (double)Model.AcceptedJobs) / (double)Model.TotalJobs * 100;
    var acceptedJobs = ((double)Model.AcceptedJobs / (double)Model.TotalJobs) * 100;
}


@if (Model.IsCircle)
{
<div class="status-circle">

    <svg>
        <filter id="dropshadow" height="130%" width="130%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3"></feGaussianBlur> <!-- stdDeviation is how much to blur -->
            <feOffset dx="2" dy="2" result="offsetblur"></feOffset> <!-- how much to offset -->
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.5"></feFuncA> <!-- slope is the opacity of the shadow -->
            </feComponentTransfer>
            <feMerge>
                <feMergeNode></feMergeNode> <!-- this contains the offset blurred image -->
                <feMergeNode in="SourceGraphic"></feMergeNode> <!-- this contains the element that the filter is applied to -->
            </feMerge>
        </filter>
        <circle cx="50%" cy="50%" r="35%" style="filter: url(#dropshadow); fill: none; stroke-width: 0.4rem; stroke: red; opacity: 0.8"><title>@(Model.TotalJobs - Model.AcceptedJobs) shifts not yet filled</title></circle>
        <circle cx="50%" cy="50%" r="35%" style="        fill: none;
        stroke: green;
        opacity: 0.8;
        stroke-width: 0.4rem;
        stroke-dasharray: calc( @acceptedJobs /100 * 3.141 * 70%);">
            <title>@Model.AcceptedJobs shifts filled</title>
        </circle>
    </svg>
    <span>@Model.AcceptedJobs/@Model.TotalJobs</span>
</div>
}
else
{
    <div class="status-bar">
        <svg>
            <rect x="0" y="@unacceptedJobs%" rx="0" ry="0" width="100%" height="@acceptedJobs%" style="fill:green;stroke-width:2;opacity:0.8"><title>@Model.AcceptedJobs shifts filled</title></rect>
            <rect x="0" y="0%" rx="0" ry="0" width="100%" height="@unacceptedJobs%" style="fill:red;stroke-width:2;opacity:0.8"><title>@(Model.TotalJobs - Model.AcceptedJobs) shifts not yet filled</title></rect>
        </svg>
       
        <span>@Model.AcceptedJobs/@Model.TotalJobs</span>
    </div>

}